generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url = env("DATABASE_URL")
  relationMode = "prisma"
}

model UserAccount {
  id String @id @default(cuid())
  userId String @unique
  cloneCredits Int @default(1)
  convertCredits Int @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model ConvertJob {
  id String @id @default(cuid())
  userId String
  songName String
  hasInstrumentals Boolean? // MUST be filled in before submitting
  hasBackingVocals Boolean? // MUST be filled in before submitting
  convertBackingVocals Boolean? // MUST be filled in before submitting
  runpodJobId String? // MUST be filled in after job is submitted
  status String @default("NOT_SUBMITTED") // IN_PROGRESS, COMPLETED, FAILED
  message String? // Only if FAILED
  userMessage String? // only if FAILED and message needed to relay to user
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model CloneJob {
  id String @id @default(cuid())
  userId String
  runpodJobId String? // MUST be filled in after job is created
  status String @default("NOT_SUBMITTED") // IN_PROGRESS, COMPLETED, FAILED
  message String? // Only if FAILED
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Clone {
  id String @id // provided by cloneJob.id
  userId String @unique
  createdAt DateTime @default(now())
}